import{x as X,y as Y,z as ee}from"./chunk-NKNGW7XA.js";import"./chunk-PB3AUL2M.js";import{i as G,j as q,l as J,m as K,n as Q,t as W,u as C}from"./chunk-42JZZIBE.js";import{d as R}from"./chunk-ZVXUN7V6.js";import{a as Z}from"./chunk-AUDRE57G.js";import{Cb as v,Db as m,Hb as F,Jc as H,Mc as N,Oa as L,Pa as _,Qb as a,Qc as M,Rb as w,Sb as B,Ub as I,Ya as l,Yb as g,Za as b,Zb as h,_b as D,da as O,ia as E,j as k,ja as P,jb as p,ka as y,la as U,lb as x,pb as c,sc as V,ub as e,uc as z,vb as r,vc as $,wb as s,wc as j,xc as A,zb as T}from"./chunk-LCVDR2E5.js";import"./chunk-LYCM6NQH.js";function re(n,t){n&1&&(e(0,"td",22),s(1,"app-loading",23),r())}function ne(n,t){n&1&&(e(0,"tr",25)(1,"td",22),a(2," No se encontraron resultados "),r()())}function ae(n,t){if(n&1&&(e(0,"a",38),s(1,"img",39),r()),n&2){let i=m(2).$implicit;x("href",i.files[0].file,_),l(),x("src",i.files[0].file,_)}}function oe(n,t){if(n&1&&(e(0,"a",38)(1,"span",40),a(2,"VER PDF"),r()()),n&2){let i=m(2).$implicit;x("href",i.files[0].file,_)}}function le(n,t){if(n&1&&p(0,ae,2,2,"a",38)(1,oe,3,1,"a",38),n&2){let i=m().$implicit;c(0,i.files[0].type.match("image")?0:-1),l(),c(1,i.files[0].type.match("pdf")?1:-1)}}function se(n,t){if(n&1){let i=T();e(0,"tr",25)(1,"td",27),p(2,le,2,2),r(),e(3,"td",28),a(4),r(),e(5,"td",27),a(6),g(7,"titlecase"),r(),e(8,"td",27),a(9),g(10,"date"),r(),s(11,"td",29),g(12,"orderStatus"),e(13,"td",27)(14,"span",30),v("click",function(){let S=E(i).$implicit,te=m(3);return P(te.openOrderDetails(S))}),a(15,"VER DETALLES"),r()(),e(16,"td",27)(17,"a",31)(18,"picture",32),y(),e(19,"svg",33),s(20,"path",34)(21,"path",35)(22,"path",36),r()(),U(),e(23,"span",37),a(24,"Consultar"),r()()()()}if(n&2){let i=t.$implicit;l(2),c(2,i.files[0]?2:-1),l(2),B(" ",i.id," "),l(2),w(h(7,6,i.workName)),l(3),B(" ",D(10,8,i.creationDate,"dd-MM-yyyy hh:mm a")," "),l(2),x("innerHTML",h(12,11,i.status),L),l(6),F("href","https://wa.me/+59895292764/?text=Hola, quisiera consultar sobre mi pedido ID: ",i.id,"",_)}}function de(n,t){if(n&1&&(p(0,se,25,13,"tr",26),g(1,"async")),n&2){let i=m(2);x("ngForOf",h(1,1,i.orders$))}}function pe(n,t){if(n&1&&(p(0,ne,3,0,"tr",24),g(1,"async"),p(2,de,2,3)),n&2){let i=m(),o;c(0,(o=h(1,1,i.orders$))!=null&&o.length?2:0)}}function me(n,t){if(n&1){let i=T();e(0,"li")(1,"a",41),v("click",function(){E(i);let d=m();return P(d.previousPage())}),e(2,"span",42),a(3,"Previous"),r(),y(),e(4,"svg",43),s(5,"path",44),r()()()}}function ce(n,t){if(n&1){let i=T();e(0,"a",45),v("click",function(){E(i);let d=m();return P(d.nextPage())}),e(1,"span",42),a(2,"Next"),r(),y(),e(3,"svg",43),s(4,"path",46),r()()}}var f=class f{constructor(t,i,o,d){this.orderService=t,this.store=i,this.dialog=o,this.actions=d,this.userId="",this.isAdmin=!1,this.currentPage=1,this.startIndex=1,this.endIndex=0,this.totalOrders=0,this.pageSize=q.PAGE_SIZE,this.isLastPage=!1,this.isFirstPage=!0,this.onpenModal=!1}ngOnInit(){this.userId=this.store.selectSnapshot(R.currentUserId),this.userId&&(this.getTotalOrdersByUserId(this.userId),this.store.select(C.totalOrders).subscribe(t=>{t&&(this.totalOrders=t,this.getOrderByPage(null),this.calculateEndIndex(),this.calculateLastPage())}))}getTotalOrdersByUserId(t){this.store.dispatch(new J(t,this.isAdmin))}searchOrders(t){if(!this.userId)return;let o=t.target.value.trim();o.length>0?this.store.dispatch(new K(this.userId,this.isAdmin,o)):(this.currentPage=1,this.getOrderByPage(null))}getOrderByPage(t){this.userId&&this.store.dispatch(new Q(this.userId,this.isAdmin,t))}previousPage(){this.currentPage--,this.getOrderByPage("prev"),this.calculateLastPage(),this.calculateFirstPage()}nextPage(){this.currentPage++,this.getOrderByPage("next"),this.calculateLastPage(),this.calculateFirstPage()}calculateEndIndex(){this.totalOrders!==void 0&&this.pageSize!==void 0&&(this.endIndex=Math.ceil(this.totalOrders/this.pageSize))}calculateLastPage(){this.currentPage>=this.endIndex?this.isLastPage=!0:this.isLastPage=!1}calculateFirstPage(){this.currentPage<=1?this.isFirstPage=!0:this.isFirstPage=!1}openOrderDetails(t){this.dialog.open(ee,{height:"600px",width:"800px",data:{order:t}})}};f.\u0275fac=function(i){return new(i||f)(b(W),b(N),b(Y),b(H))},f.\u0275cmp=O({type:f,selectors:[["app-user-orders-table"]],standalone:!0,features:[I],decls:49,vars:10,consts:[[1,"mx-auto","max-w-screen-2xl","px-4","lg:px-12"],[1,"bg-white","dark:bg-gray-800","relative","shadow-md","sm:rounded-lg","overflow-hidden"],[1,"flex","flex-col","md:flex-row","items-center","justify-between","space-y-3","md:space-y-0","md:space-x-4","p-4"],[1,"w-full","md:w-1/2"],[1,"flex","items-center"],["for","simple-search",1,"sr-only"],[1,"relative","w-full"],[1,"absolute","inset-y-0","left-0","flex","items-center","pl-3","pointer-events-none"],["aria-hidden","true","fill","currentColor","viewbox","0 0 20 20","xmlns","http://www.w3.org/2000/svg",1,"w-5","h-5","text-gray-500","dark:text-gray-400"],["fill-rule","evenodd","d","M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z","clip-rule","evenodd"],["type","text","id","ssearch","placeholder","Buscar","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-primary-500","focus:border-primary-500","block","w-full","pl-10","p-2","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-primary-500","dark:focus:border-primary-500",3,"input"],[1,"h-[40rem]","overflow-y-auto"],[1,"w-full","text-sm","text-left","text-gray-500","dark:text-gray-400"],[1,"text-xs","text-gray-700","uppercase","bg-gray-50","dark:bg-gray-700","dark:text-gray-400"],["scope","col",1,"px-4","py-3"],["class","px-4 py-3 text-center","colspan","5"],["aria-label","Table navigation",1,"flex","flex-col","md:flex-row","justify-between","items-start","md:items-center","space-y-3","md:space-y-0","p-4"],[1,"text-sm","font-normal","text-gray-500","dark:text-gray-400"],[1,"font-semibold","text-gray-900","dark:text-white"],[1,"inline-flex","items-stretch","-space-x-px"],[1,"flex","items-center","justify-center","text-sm","py-2","px-3","leading-tight","text-gray-500","bg-white","border","border-gray-300","hover:bg-gray-100","hover:text-gray-700","dark:bg-gray-800","dark:border-gray-700","dark:text-gray-400","dark:hover:bg-gray-700","dark:hover:text-white"],["class","flex items-center justify-center h-full py-1.5 px-3 leading-tight text-gray-500 bg-white rounded-r-lg border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white"],["colspan","5",1,"px-4","py-3","text-center"],["classes","inline w-10 h-10 text-gray-200 animate-spin dark:text-gray-600 fill-blue-600"],["class","border-b dark:border-gray-700"],[1,"border-b","dark:border-gray-700"],["class","border-b dark:border-gray-700",4,"ngFor","ngForOf"],[1,"px-4","py-3"],["scope","row",1,"px-4","py-3","font-medium","text-gray-900","whitespace-nowrap","dark:text-white"],[1,"px-4","py-3",3,"innerHTML"],[1,"text-blue-500","hover:text-blue-800","cursor-pointer",3,"click"],["target","_blank",1,"flex","items-center","rounded-lg","px-1","py-1","bg-blue-500","hover:bg-blue-700","text-white",3,"href"],[1,"w-6","h-6","mx-4"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","stroke-width","2","stroke","currentColor","fill","none","stroke-linecap","round","stroke-linejoin","round",1,"icon","icon-tabler","icon-tabler-brand-whatsapp"],["stroke","none","d","M0 0h24v24H0z","fill","none"],["d","M3 21l1.65 -3.8a9 9 0 1 1 3.4 2.9l-5.05 .9"],["d","M9 10a.5 .5 0 0 0 1 0v-1a.5 .5 0 0 0 -1 0v1a5 5 0 0 0 5 5h1a.5 .5 0 0 0 0 -1h-1a.5 .5 0 0 0 0 1"],[1,"text-md","font-semibold"],["target","_blank",3,"href"],["alt","Imagen de la orden",1,"w-10","h-10","rounded-lg",3,"src"],[1,"text-blue-500","hover:text-blue-800","cursor-pointer"],[1,"flex","items-center","justify-center","h-full","py-1.5","px-3","ml-0","text-gray-500","bg-white","rounded-l-lg","border","border-gray-300","hover:bg-gray-100","hover:text-gray-700","dark:bg-gray-800","dark:border-gray-700","dark:text-gray-400","dark:hover:bg-gray-700","dark:hover:text-white",3,"click"],[1,"sr-only"],["aria-hidden","true","fill","currentColor","viewBox","0 0 20 20","xmlns","http://www.w3.org/2000/svg",1,"w-5","h-5"],["fill-rule","evenodd","d","M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z","clip-rule","evenodd"],[1,"flex","items-center","justify-center","h-full","py-1.5","px-3","leading-tight","text-gray-500","bg-white","rounded-r-lg","border","border-gray-300","hover:bg-gray-100","hover:text-gray-700","dark:bg-gray-800","dark:border-gray-700","dark:text-gray-400","dark:hover:bg-gray-700","dark:hover:text-white",3,"click"],["fill-rule","evenodd","d","M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule","evenodd"]],template:function(i,o){i&1&&(e(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"form",4)(5,"label",5),a(6,"Search"),r(),e(7,"div",6)(8,"div",7),y(),e(9,"svg",8),s(10,"path",9),r()(),U(),e(11,"input",10),v("input",function(S){return o.searchOrders(S)}),r()()()()(),e(12,"div",11)(13,"table",12)(14,"thead",13)(15,"tr"),s(16,"th",14),e(17,"th",14),a(18,"Id pedido"),r(),e(19,"th",14),a(20,"Nombre pedido"),r(),e(21,"th",14),a(22,"Fecha de pedido"),r(),e(23,"th",14),a(24,"Estado"),r(),s(25,"th",14)(26,"th",14),r()(),e(27,"tbody"),p(28,re,2,0,"td",15),g(29,"async"),p(30,pe,3,3),r()()(),e(31,"nav",16)(32,"span",17),a(33," Total de ordenes: "),e(34,"span",18),a(35),g(36,"async"),r(),s(37,"br"),e(38,"span",17),a(39," Ordenes por pagina: "),e(40,"span",18),a(41),r()()(),e(42,"ul",19),p(43,me,6,0,"li"),e(44,"li")(45,"a",20),a(46),r()(),e(47,"li"),p(48,ce,5,0,"a",21),r()()()()()),i&2&&(l(28),c(28,h(29,6,o.isLoading$)?28:30),l(7),w(h(36,8,o.totalOrders$)),l(6),w(o.pageSize),l(2),c(43,o.isFirstPage?-1:43),l(3),w(o.currentPage),l(2),c(48,o.isLastPage?-1:48))},dependencies:[A,V,z,$,j,X,G,Z]});var u=f;k([M(C.isLoading)],u.prototype,"isLoading$",void 0);k([M(C.orders)],u.prototype,"orders$",void 0);k([M(C.totalOrders)],u.prototype,"totalOrders$",void 0);var Ue=(()=>{let t=class t{};t.\u0275fac=function(d){return new(d||t)},t.\u0275cmp=O({type:t,selectors:[["app-user-orders"]],standalone:!0,features:[I],decls:5,vars:0,consts:[[1,"h-full"],[1,"h-full","bg-gray-50","dark:bg-gray-900","p-3","mb-8","sm:p-5"],[1,"text-center","text-6xl","tracking-tight","font-semibold","text-gray-900","dark:text-white","mb-8","my-8"]],template:function(d,S){d&1&&(e(0,"main",0)(1,"section",1)(2,"h2",2),a(3,"Mis Pedidos \u{1F4E6}"),r(),s(4,"app-user-orders-table"),r()())},dependencies:[u]});let n=t;return n})();export{Ue as UserOrdersComponent};
