import{$ as h,A as m,Dd as S,Ld as v,Oc as f,Pc as g,Rc as y,S as d,V as a,aa as U,j as c,k as u,m as l,vd as p,wd as P}from"./chunk-LCVDR2E5.js";var b=(()=>{let e=class e{constructor(r){this.uid=r}};e.type="[User] Get User Preferences";let s=e;return s})(),j=(()=>{let e=class e{constructor(r,t){this.uid=r,this.preferences=t}};e.type="[User] Update User Preferences";let s=e;return s})();var I=(()=>{let e=class e{constructor(r){this.firestore=r}getUserPreferences(r){let t=p(this.firestore,"users",r);return u(S(t))}updateUserPreferences(r,t){let N=p(this.firestore,"users",r),w={email:t.email,fullName:t.fullName,phoneNumber:t.phoneNumber,ci:t.ci};return u(v(N,w))}};e.\u0275fac=function(t){return new(t||e)(h(P))},e.\u0275prov=a({token:e,factory:e.\u0275fac,providedIn:"root"});let s=e;return s})();var o,n=(o=class{constructor(){this.userService=U(I)}static userLoading(e){return e.loading}updateUserPreferences(e,i){e.patchState({loading:!0});let{uid:r,preferences:t}=i;return this.userService.updateUserPreferences(r,t)}getUserPreferencesByUid(e,i){return e.patchState({loading:!0}),this.userService.getUserPreferences(i.uid).pipe(d(r=>{if(r.exists()){let t=r.data();e.patchState(t),e.patchState({loading:!1})}}),m(r=>l(()=>r)))}},o.\u0275fac=function(i){return new(i||o)},o.\u0275prov=a({token:o,factory:o.\u0275fac,providedIn:"root"}),o);c([f(j,{cancelUncompleted:!0})],n.prototype,"updateUserPreferences",null);c([f(b,{cancelUncompleted:!0})],n.prototype,"getUserPreferencesByUid",null);c([y()],n,"userLoading",null);n=c([g({name:"user",defaults:{user:null,loading:!1,preferences:null}})],n);export{b as a,j as b,n as c};
