import{a as ae,b as se,c as le,d as me,e as ce,f as pe,g as Ve,h as Y,i as f}from"./chunk-XQCMFHKM.js";import{a as Te}from"./chunk-AUDRE57G.js";import{$d as G,Cb as u,Db as v,Gb as be,Hb as ye,Ib as we,Ic as d,Jc as C,Mc as _,Nd as N,Qb as m,Qc as h,Qd as I,Rd as U,S as ve,Sb as oe,Sd as A,Td as E,Ub as x,Ud as Fe,Vd as ke,Wd as $,Xb as xe,Xd as De,Ya as o,Yb as b,Yd as L,Za as c,Zb as y,Zd as Se,_d as Be,da as w,ge as D,ha as V,he as X,ia as F,ie as M,j as g,ja as k,jb as R,ka as re,lb as a,pb as ie,qb as H,rc as Ce,sb as J,tb as K,ub as i,uc as T,vb as n,wb as p,xc as _e,zb as Q}from"./chunk-LCVDR2E5.js";import{d as te,g as ne}from"./chunk-LYCM6NQH.js";var S=te(ne());function Ie(s,e){s&1&&p(0,"app-loading",0)}function Ae(s,e){}function Ee(s,e){}function $e(s,e){if(s&1){let t=Q();i(0,"div",12)(1,"span",13),m(2),n(),p(3,"input",14),n(),i(4,"button",15),u("click",function(){let Z=F(t).$index,ee=v(2);return k(ee.removeColumn(Z))}),re(),i(5,"svg",16),p(6,"path",17)(7,"path",18),n()()}if(s&2){let t=e.$index;o(2),oe(" Columna ",t+1," "),o(),ye("placeholder","Titulo ",t+1,""),a("formControlName",t)}}var Le=(s,e)=>({"min-w-[204px]":s,"w-[9.5rem]":e});function Ge(s,e){if(s&1&&(i(0,"div",21),p(1,"input",22),n()),s&2){let t=e.$index,r=e.$count;a("ngClass",xe(4,Le,t!==r-1,t===r-1)),o(),we("placeholder","Fila ",t+1,", Columna ",t+1,""),a("formControlName",t)}}function Me(s,e){if(s&1){let t=Q();i(0,"div",19),J(1,Ge,2,7,"div",21,H),i(3,"button",20),u("click",function(){let Z=F(t).$index,ee=v(2);return k(ee.removeRow(Z))}),re(),i(4,"svg",16),p(5,"path",17)(6,"path",18),n()()()}if(s&2){let t=e.$index,r=v(2);a("formGroupName",t),o(),K(r.columnControls)}}function Pe(s,e){if(s&1){let t=Q();i(0,"h3",1),m(1,"Tabla de Precios\u{1F4B2}"),n(),i(2,"form",2)(3,"div",3),R(4,Ae,0,0),b(5,"async"),R(6,Ee,0,0),i(7,"div")(8,"div",4),J(9,$e,8,3,null,null,H),n(),i(11,"div",5),J(12,Me,7,1,"div",23,H),n()(),i(14,"div",6)(15,"button",7),u("click",function(){F(t);let l=v();return k(l.newColumn())}),m(16," + Columna "),n(),i(17,"button",8),u("click",function(){F(t);let l=v();return k(l.newRow())}),m(18," + Fila "),n()()(),i(19,"div",9)(20,"app-button",10),u("click",function(){F(t);let l=v();return k(l.sendTable())}),b(21,"async"),m(22),n(),i(23,"app-button",11),u("click",function(){F(t);let l=v();return k(l.deleteTable())}),b(24,"async"),m(25," Eliminar Tabla "),n()()()}if(s&2){let t=v();o(2),a("formGroup",t.priceForm),o(2),ie(4,y(5,7,t.loading$)?4:6),o(5),K(t.columnControls),o(3),K(t.rowControls),o(8),a("isLoading",y(21,9,t.removeTableLoading$))("isDisabled",t.priceForm.invalid),o(2),oe(" ",t.nameButton," "),o(),a("isLoading",y(24,11,t.tableLoading$))("isDisabled",t.priceForm.invalid)}}var P=class P{constructor(e,t,r){this.formBuilder=e,this.actions=t,this.store=r,this.table={},this.nameButton=""}ngOnInit(){this.priceForm=this.formBuilder.group({columns:this.formBuilder.array([]),rows:this.formBuilder.array([])})}changeTitleButton(){this.nameButton=this.table.id.length>0?"Actualizar":"Guardar"}ngOnChanges(e){e.table&&this.table&&(this.priceForm?.patchValue({uid:this.table.id,columns:this.table.columns,rows:this.table.rows}),this.initializeFormWithTableData()),this.changeTitleButton()}initializeFormWithTableData(){if(this.table.columns.length>0){let e=this.table.columns.map(r=>this.formBuilder.control(r)),t=this.formBuilder.array(e);this.priceForm.setControl("columns",t)}if(this.table.rows.length>0){let e=this.table.rows.map(r=>this.formBuilder.array(r.map(l=>this.formBuilder.control(l)))),t=this.formBuilder.array(e);this.priceForm.setControl("rows",t)}}get columnControls(){return(this.priceForm?.get("columns")).controls}get rowControls(){return(this.priceForm?.get("rows")).controls}newColumn(){if(this.priceForm&&this.priceForm.get("columns")instanceof D&&this.priceForm.get("rows")instanceof D){let e=this.priceForm.get("columns"),t=this.priceForm.get("rows");if(e.length>6){S.default.fire({position:"top-end",icon:"error",title:"No se pueden agregar m\xE1s de 7 columnas",showConfirmButton:!1,timer:1500});return}e.push(this.formBuilder.control("")),t.controls.forEach(r=>{r.push(this.formBuilder.control(""))})}else console.error("priceForm is not initialized or columns/rows is not a FormArray")}removeColumn(e){if(this.priceForm&&this.priceForm.get("columns")instanceof D&&this.priceForm.get("rows")instanceof D){let t=this.priceForm.get("columns"),r=this.priceForm.get("rows");t.removeAt(e),r.controls.forEach(l=>{l.removeAt(e)})}else console.error("priceForm is not initialized or columns/rows is not a FormArray")}newRow(){if(this.priceForm&&this.priceForm.get("rows")instanceof D){let e=this.priceForm.get("rows"),t=this.priceForm.get("columns")?.value.map(()=>this.formBuilder.control(""));if(e.length>7){S.default.fire({position:"top-end",icon:"error",title:"No se pueden agregar m\xE1s de 7 filas",showConfirmButton:!1,timer:1500});return}e.push(this.formBuilder.array(t))}else console.error("priceForm is not initialized or rows is not a FormArray")}removeRow(e){this.priceForm&&this.priceForm.get("rows")instanceof D?this.priceForm.get("rows").removeAt(e):console.error("priceForm is not initialized or rows is not a FormArray")}sendTable(){if(this.table.id.length>0)try{let e={id:this.table.id,table:{columns:this.priceForm?.get("columns")?.value,rows:this.priceForm?.get("rows")?.value}};this.store.dispatch(new le(e)),this.actions.pipe(d(le)).subscribe(()=>{})}catch(e){console.error(e),S.default.fire({position:"top-end",icon:"error",title:"Error al guardar la tabla",showConfirmButton:!1,timer:1500})}else try{let e={table:{columns:this.priceForm?.get("columns")?.value,rows:this.priceForm?.get("rows")?.value}};this.store.dispatch(new se(e)),this.actions.pipe(d(se)).subscribe(()=>{})}catch(e){console.error(e),S.default.fire({position:"top-end",icon:"error",title:"Error al guardar la tabla",showConfirmButton:!1,timer:1500})}}deleteTable(){try{this.store.dispatch(new me(this.table.id)),this.actions.pipe(d(me)).subscribe(()=>{S.default.fire({position:"top-end",icon:"success",title:"Tabla eliminada con \xE9xito",showConfirmButton:!1,timer:1500})}),this.priceForm.reset();let e=this.priceForm.get("columns"),t=this.priceForm.get("rows");for(;e.length;)e.removeAt(0);for(;t.length;)t.removeAt(0);this.table={id:"",columns:[],rows:[]},this.changeTitleButton()}catch(e){console.error(e),S.default.fire({position:"top-end",icon:"error",title:"Error al eliminar la tabla",showConfirmButton:!1,timer:1500})}}};P.\u0275fac=function(t){return new(t||P)(c(X),c(C),c(_))},P.\u0275cmp=w({type:P,selectors:[["app-price-form"]],inputs:{table:"table"},standalone:!0,features:[V,x],decls:3,vars:3,consts:[["classes","inline w-20 h-20 text-gray-200 animate-spin dark:text-gray-600 fill-blue-600"],[1,"w-full","text-4xl","font-semibold","my-8"],[3,"formGroup"],[1,"flex","w-[60rem]","max-h-[30rem]","overflow-x-auto","overflow-y-auto","bg-white","shadow-lg","px-6","py-8","rounded-lg","mb-8"],["formArrayName","columns",1,"flex","gap-3"],["formArrayName","rows"],[1,"flex","flex-col","w-44","justify-evenly","mb-2"],["type","button",1,"center","px-3","bg-blue-600","py-1","ml-4","mr-3","text-base","font-medium","text-center","text-white","rounded-lg","bg-primary-700","hover:bg-primary-800","focus:ring-4","focus:ring-primary-300","dark:focus:ring-primary-900",3,"click"],["type","button",1,"center","bg-blue-600","px-3","py-1","ml-4","mr-3","text-base","font-medium","text-center","text-white","rounded-lg","bg-primary-700","hover:bg-primary-800","focus:ring-4","focus:ring-primary-300","dark:focus:ring-primary-900",3,"click"],[1,"flex"],["classes","center px-5 py-3 mr-3 text-base font-medium text-center text-white rounded-lg bg-blue-600 hover:bg-blue-900 focus:ring-4 focus:ring-primary-300 dark:focus:ring-primary-900",3,"isLoading","isDisabled","click"],["classes","center px-5 py-3 mr-3 text-base font-medium text-center text-white rounded-lg bg-red-600 hover:bg-red-900 focus:ring-4 focus:ring-primary-300 dark:focus:ring-primary-900",3,"isLoading","isDisabled","click"],[1,"flex","flex-col","gap-1"],[1,"font-semibold"],["type","text",1,"w-40","shadow-sm","bg-slate-200","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-primary-500","focus:border-primary-500","block","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-primary-500","dark:focus:border-primary-500","dark:shadow-sm-light",3,"formControlName","placeholder"],["type","button","title","Eliminar Columna",1,"center","w-8","h-8","mt-8","border","shadow-sm","hover:bg-gray-50","px-1","rounded-lg","bg-white","text-2xl","font-medium","text-center","text-red-600","focus:ring-4","focus:ring-primary-300","dark:focus:ring-primary-900",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","25","height","25","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor","fill","none","stroke-linecap","round","stroke-linejoin","round",1,"icon","icon-tabler","icon-tabler-minus"],["stroke","none","d","M0 0h24v24H0z","fill","none"],["d","M5 12l14 0"],[1,"flex","gap-3","my-4",3,"formGroupName"],["title","Eliminar Fila","type","button",1,"center","w-8","h-8","border","shadow-sm","hover:bg-gray-50","px-1","mr-1","rounded-lg","bg-white","text-2xl","font-medium","text-center","m-2","text-red-600","focus:ring-4","focus:ring-primary-300","dark:focus:ring-primary-900",3,"click"],[3,"ngClass"],["type","text",1,"w-40","shadow-sm","bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-primary-500","focus:border-primary-500","block","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-primary-500","dark:focus:border-primary-500","dark:shadow-sm-light",3,"formControlName","placeholder"],["class","flex gap-3 my-4",3,"formGroupName"]],template:function(t,r){t&1&&(R(0,Ie,1,0,"app-loading",0),b(1,"async"),R(2,Pe,26,13)),t&2&&ie(0,y(1,1,r.loading$)?0:2)},dependencies:[M,$,I,A,E,L,G,Se,Be,N,Ce,Te,T]});var B=P;g([h(f.settingsLoading)],B.prototype,"loading$",void 0);g([h(f.updateTableLoading)],B.prototype,"tableLoading$",void 0);g([h(f.removeTableLoading)],B.prototype,"removeTableLoading$",void 0);var fe=te(ne());var j=class j{constructor(e,t){this.actions=e,this.store=t,this.video={url:"",id:""},this.url="",this.videoForm=new Fe({url:new ke("",[U.required])})}ngOnInit(){}ngOnChanges(e){e.video&&this.video.url&&(this.videoForm.patchValue({url:this.video.url}),this.url=this.video.url)}saveVideo(){if(this.videoForm.valid)if(!this.video.id)this.store.dispatch(new ce(this.videoForm.value)),this.actions.pipe(d(ce)).subscribe(()=>{fe.default.fire({position:"top-end",icon:"success",title:"Video gurdado con exito",showConfirmButton:!1,timer:1500})});else{let e={videoId:this.video.id,url:this.videoForm.value.url};this.store.dispatch(new pe(e)),this.actions.pipe(d(pe)).subscribe(()=>{fe.default.fire({position:"top-end",icon:"success",title:"Video actulizado con exito",showConfirmButton:!1,timer:1500})})}}};j.\u0275fac=function(t){return new(t||j)(c(C),c(_))},j.\u0275cmp=w({type:j,selectors:[["app-video-form"]],inputs:{video:"video"},standalone:!0,features:[V,x],decls:8,vars:6,consts:[[1,"center","flex-col","min-w-[70rem]","pl-20","items-start",3,"formGroup"],[1,"text-4xl","font-semibold","text-left","mb-6"],[1,"w-[30rem]","flex-col"],["type","text","formControlName","url",1,"w-full","shadow-sm","bg-white","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-primary-500","focus:border-primary-500","block","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-primary-500","dark:focus:border-primary-500","dark:shadow-sm-light",3,"ngModel"],["classes","w-44 center bg-blue-600 p-3 mt-6 text-base font-medium text-center text-white rounded-lg bg-primary-700 hover:bg-primary-800 focus:ring-4 focus:ring-primary-300 dark:focus:ring-primary-900",3,"isLoading","isDisabled","click"]],template:function(t,r){t&1&&(i(0,"form",0)(1,"h3",1),m(2,"Video \u{1F517}"),n(),i(3,"div",2),p(4,"input",3),i(5,"app-button",4),u("click",function(){return r.saveVideo()}),b(6,"async"),m(7," Cambiar Video "),n()()()),t&2&&(a("formGroup",r.videoForm),o(4),be("ngModel",r.url),o(),a("isLoading",y(6,4,r.updateVideoLoading$))("isDisabled",r.videoForm.invalid))},dependencies:[M,$,I,A,E,L,G,N,T]});var q=j;g([h(f.updateVideoLoading)],q.prototype,"updateVideoLoading$",void 0);var ge=te(ne());var z=class z{constructor(e,t,r){this.formBuilder=e,this.actions=t,this.store=r,this.valueDolarInput={}}ngOnInit(){this.valueDolar=this.formBuilder.group({value:this.formBuilder.control("",[U.required,U.pattern("^[0-9]*$")])})}ngOnChanges(e){this.valueDolarInput.value>0&&this.valueDolar.patchValue({value:this.valueDolarInput.value})}changeValueDolar(){if(this.valueDolar.valid)if(this.valueDolarInput.id){let e={valueDolar:this.valueDolar.value.value,id:this.valueDolarInput.id};this.store.dispatch(new Y(e)),this.actions.pipe(d(Y)).subscribe(()=>{ge.default.fire({position:"top-end",icon:"success",title:"Valor del dolar actualizado con \xE9xito",showConfirmButton:!1,timer:1500})})}else{let e={value:this.valueDolar.value.value};this.store.dispatch(new Ve(e)),this.actions.pipe(d(Y)).subscribe(()=>{ge.default.fire({position:"top-end",icon:"success",title:"Valor del dolar actualizado con \xE9xito",showConfirmButton:!1,timer:1500})})}}};z.\u0275fac=function(t){return new(t||z)(c(X),c(C),c(_))},z.\u0275cmp=w({type:z,selectors:[["app-dolar-form"]],inputs:{valueDolarInput:"valueDolarInput"},standalone:!0,features:[V,x],decls:9,vars:4,consts:[[1,"flex","flex-col","item-start","min-w-[70rem]","pl-20"],[1,"text-4xl","font-semibold","my-4"],["action","",3,"formGroup"],[1,"flex","flex-col","gap-4","ml-1"],["title","value","type","number","formControlName","value",1,"w-40","shadow-sm","bg-white","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-primary-500","focus:border-primary-500","block","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-primary-500","dark:focus:border-primary-500","dark:shadow-sm-light"],["classes","center w-40 px-3 bg-blue-600 py-2 mb-4  mr-3 text-base font-medium text-center text-white rounded-lg bg-primary-700 hover:bg-primary-800 focus:ring-4 focus:ring-primary-300 dark:focus:ring-primary-900","type","button",3,"isLoading","click"]],template:function(t,r){t&1&&(i(0,"div",0)(1,"h3",1),m(2,"Valor dolar \u{1F4B5}"),n(),i(3,"form",2)(4,"div",3),p(5,"input",4),i(6,"app-button",5),u("click",function(){return r.changeValueDolar()}),b(7,"async"),m(8," Actualizar valor "),n()()()()),t&2&&(o(3),a("formGroup",r.valueDolar),o(3),a("isLoading",y(7,2,r.valueDolarLoading$)))},dependencies:[M,$,I,De,A,E,L,G,N,T]});var W=z;g([h(f.updateValueDolarLoading)],W.prototype,"valueDolarLoading$",void 0);var O=class O{constructor(e,t){this.actions=e,this.store=t,this.tableData={id:"",columns:[],rows:[]},this.videoData={},this.valueDolar={value:0,id:""}}ngOnInit(){this.store.dispatch(new ae),this.getSettings()}getSettings(){this.actions.pipe(d(ae),ve(()=>{let e=this.store.selectSnapshot(f);e.tables&&e.tables.rows&&e.tables.columns&&(this.tableData={id:e.tables.id,rows:e.tables.rows.map(t=>Object.values(t)),columns:e.tables.columns}),e.videos&&(this.videoData={id:e.videos.id,url:e.videos.url}),e.valueDolar&&(this.valueDolar={value:e.valueDolar.value,id:e.valueDolar.id})})).subscribe(()=>{})}};O.\u0275fac=function(t){return new(t||O)(c(C),c(_))},O.\u0275cmp=w({type:O,selectors:[["app-settings-pages"]],standalone:!0,features:[x],decls:7,vars:3,consts:[[1,"bg-gray-50"],[1,"py-8","text-6xl","text-center","font-semibold"],[1,"flex","flex-col","justify-center","items-center","pt-8","gap-8"],[3,"table"],[3,"video"],[3,"valueDolarInput"]],template:function(t,r){t&1&&(i(0,"main",0)(1,"h1",1),m(2,"Configuraciones \u2699\uFE0F"),n(),i(3,"div",2),p(4,"app-price-form",3)(5,"app-video-form",4)(6,"app-dolar-form",5),n()()),t&2&&(o(4),a("table",r.tableData),o(),a("video",r.videoData),o(),a("valueDolarInput",r.valueDolar))},dependencies:[B,q,_e,W]});var he=O;g([h(f)],he.prototype,"settings$",void 0);export{he as SettingsPagesComponent};
